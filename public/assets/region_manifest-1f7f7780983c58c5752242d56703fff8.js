function StaticMap(){var e=this;this.$modal=document.getElementById("mba_modal"),this.$modal_body=document.getElementById("modal_body"),this.map_url="http://maps.googleapis.com/maps/api/staticmap?zoom=16&size=530x400&maptype=roadmap&sensor=false&markers=color:green%7C",this.init=function(){var t=this.rel,i=e.map_url;i+=t,i+="&center="+t,e.$modal_body.innerHTML='<img src="'+i+'" width="530" height="400" />',e.$modal.className="modal",setTimeout(function(){jUtils.addEvent(document,"keyup",e.hideModalIf)},300)},this.hideModal=function(){jUtils.removeEvent(document,"keyup",e.hideModalIf),e.$modal.className+=" fade",setTimeout(function(){e.$modal.className+=" hide"},500)},this.hideModalIf=function(t){27===jUtils.getEvent(t).keyCode&&e.hideModal()}}function Toggler(){this.tableToggle=function(){var e=this.className.split(/\s+/),t=e.find("active"),i=this.rel,s=document.getElementById(i+"_container");return-1===t?(this.className+=" active",s.style.display="block"):(e.splice(t,1),this.className=e.join(" "),s.style.display="none"),!1},this.nextStopsToggle=function(){var e=this.className.split(/\s+/),t=e.find("active"),i=document.getElementById(this.rel);jUtils.hasClass(i,"hidden-phone")?(this.className+=" active",i.className=""):(i.className="hidden-phone hidden-tablet",e.splice(t,1),this.className=e.join(" "))}}function BusSchedule(){this.schedule=[],this.route_name="",this.init=function(e){this.route_name=e;for(var t,i=document.getElementById(this.route_name+"_table"),s=0;t=i.rows[s];s++)for(var n,l=1;n=t.cells[l];l++){var a=l-1,o=n.innerHTML.replace(/\d+|\s+|:/g,"");this.schedule[a]||(this.schedule[a]=[]),o&&-1===this.schedule[a].find(o)&&this.schedule[a].push(o)}},this.toggleAM=function(e){return this.toggler("AM",e),this},this.togglePM=function(e){return this.toggler("PM",e),this},this.toggler=function(e,t){for(var i=0;i<this.schedule.length;i++)if(1===this.schedule[i].length&&this.schedule[i][0]===e)for(var s=0,n=jUtils.findByClass(this.route_name+"-time-cell-"+i);s<n.length;s++)n[s].style.display=t}}function changeTimeFrame(){var e=this.rel,t=this.parentElement,i=t,s=t,n=Schedules[e];if(e){for(n||(n=new BusSchedule,n.init(e),Schedules[e]=n),t.className="active";s=s.nextSibling;)s.className="";for(;i=i.previousSibling;)i.className="";jUtils.hasClass(this,"morning")?n.toggleAM("table-cell").togglePM("none"):jUtils.hasClass(this,"afternoon")?n.toggleAM("none").togglePM("table-cell"):n.toggleAM("table-cell").togglePM("table-cell")}}Number.prototype.timesDo=function(e){if(e)for(var t=0;this>t;t++)e.call()},String.prototype.squeeze=function(){return this.replace(/\s+/g,"")},String.prototype.pluralize=function(e){var t="s";return 1==e&&(t=""),this+t},Array.prototype.compacted=function(){for(var e=[],t=0;t<this.length;t++)void 0!==this[t]&&null!==this[t]&&this[t]!==!1&&e.push(this[t]);return e},Array.prototype.find=function(e){for(var t=-1,i=0;i<this.length;i++)this[i]==e&&(t=i);return t},Array.prototype.findObject=function(e,t){for(var i=null,s=0;s<this.length;s++)this[s][t]==e&&(i=this[s]);return i},Array.prototype.updateObject=function(e,t,i,s){for(var n=0;n<this.length;n++)if(this[n][t]==s)return this[n][i]=s},Array.prototype.findAndRemove=function(e){for(var t=0;t<this.length;t++)this[t]==e&&this.splice(t,1)},Array.prototype.findAndRemoveObject=function(e,t){for(var i=0;i<this.length;i++)this[i]&&this[i][t]==e&&this.splice(i,1)};var jUtils={addEvent:function(e,t,i){var s=function(e){e.addEventListener?e.addEventListener(t,i):e.attachEvent?e.attachEvent("on"+t,function(){i.call(this.target||this.event.srcElement)}):e[t]=i};if("undefined"!=typeof e[0])for(var n=0;n<e.length;n++)s(e[n]);else s(e)},removeEvent:function(e,t,i){e.removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent?e.detachEvent("on"+t,i):e[t]=null},findByClass:function(e){return document.getElementsByClassName?document.getElementsByClassName(e):document.querySelectorAll("."+e)},hasClass:function(e,t){return e.classList?e.classList.contains(t):-1!==e.className.split(/\s+/).find(t)},getEvent:function(e){return e?e:window.event}},Schedules={},Toga=new Toggler;jUtils.addEvent(window,"load",function(){var e=jUtils.findByClass("time-list");jUtils.addEvent(e,"click",Toga.tableToggle),jUtils.addEvent(jUtils.findByClass("next-stop-list"),"click",Toga.nextStopsToggle),jUtils.addEvent(jUtils.findByClass("time-frame"),"click",changeTimeFrame);for(var t=0,i=jUtils.findByClass("active");t<i.length;t++)changeTimeFrame.call(i[t].childNodes[0]);for(var s=0,n=jUtils.findByClass("icon");s<n.length;s++)n[s].className+=" icon-white";if(window.location.hash)for(var l=0;l<e.length;l++)"#"+e[l].rel==window.location.hash&&Toga.tableToggle.call(e[l]);else 1===e.length&&Toga.tableToggle.call(e[0])});