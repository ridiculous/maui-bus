function Maui(){var t=this;this.gmap=null,this.bus_stops=[],this.way_points=[],this.map_name="",this.centering=!1,this.loadBusStops=function(t){this.gmap||(this.gmap=new BaseMap),this.bus_stops=t;for(var e=0;e<t.length;e++)this[t[e].location]=t[e].name},this.drawRoute=function(e,i,s){if("undefined"!=typeof Center)this.centering=!0,this.centerMap();else{this.setWayPoints(s);var n={origin:e,destination:i,travelMode:google.maps.TravelMode.DRIVING,waypoints:this.way_points};this.gmap.directionsService.route(n,function(e,i){i==google.maps.DirectionsStatus.OK&&t.gmap.directionsDisplay.setDirections(e)}),this.gmap.addMarkers(this.bus_stops,this.map_name)}},this.setWayPoints=function(t){for(var e=0;e<t.length;e++){var i=null,s={};t[e]&&/:stopover/.test(t[e])?(i=this.bus_stops.findObject(t[e].split(":")[0],"location"),s.stopover=!1):i=this.bus_stops.findObject(t[e],"location"),s.location=new google.maps.LatLng(i.lat,i.long),this.way_points[e]=s}},this.setMapName=function(t){this.map_name=t},this.centerMap=function(t){var e=t||this.bus_stops.findObject(this[Center],"name"),i=new google.maps.LatLng(e.lat,e.long),s=this.gmap.addMarkers([e],this.map_name)[0];this.gmap.map.setCenter(i),this.gmap.map.setZoom(this.gmap.map.getZoom()+11),google.maps.event.trigger(s.marker,"click")},this.addQueenKaahumanuBack=function(){this.bus_stops.push({hidden:!0,lat:20.884325,"long":-156.476362,location:"queen_kaahumanu_back",name:"Back of Queen Kaahumanu"})}}function BaseMap(t){this.Mall=new google.maps.LatLng(20.88657,-156.475375),this.mapOptions=t||{zoom:7,mapTypeId:google.maps.MapTypeId.ROADMAP,center:this.Mall},this.map=new google.maps.Map(document.getElementById("map_canvas"),this.mapOptions),this.directionsService=new google.maps.DirectionsService,this.directionsDisplay=new google.maps.DirectionsRenderer({suppressMarkers:!0}),this.directionsDisplay.setMap(this.map),this.addMarkers=function(t,e){for(var i=[],s=e?e+"\n":"",n=0;n<t.length;n++)if(!t[n].hidden){var o={position:new google.maps.LatLng(t[n].lat,t[n].long),map:this.map,title:s+t[n].name},a=o.title.replace(/\n/,"<br />");t[n].times&&(a+="<br />"+t[n].times),i.push(new BaseMarker(this.map,o,a))}return i},this.addRoute=function(t){var e=new google.maps.DirectionsService,i=new google.maps.DirectionsRenderer({suppressMarkers:!0});i.setMap(this.map),e.route(t,function(t,e){e==google.maps.DirectionsStatus.OK&&i.setDirections(t)})}}function BaseMarker(t,e,i){var s=this;this.marker=new google.maps.Marker(e),google.maps.event.addListener(this.marker,"click",function(){var e=this.title.replace(/.+\n/,"");info_window&&info_window.close(),last_stop!==e?(last_stop=this.title.replace(/.+\n/,""),info_window=new google.maps.InfoWindow({size:new google.maps.Size(150,50)}),info_window.setContent(i),info_window.open(t,s.marker)):last_stop=""})}Number.prototype.timesDo=function(t){if(t)for(var e=0;this>e;e++)t.call()},String.prototype.squeeze=function(){return this.replace(/\s+/g,"")},String.prototype.pluralize=function(t){var e="s";return 1==t&&(e=""),this+e},Array.prototype.compacted=function(){for(var t=[],e=0;e<this.length;e++)void 0!==this[e]&&null!==this[e]&&this[e]!==!1&&t.push(this[e]);return t},Array.prototype.find=function(t){for(var e=-1,i=0;i<this.length;i++)this[i]==t&&(e=i);return e},Array.prototype.findObject=function(t,e){for(var i=null,s=0;s<this.length;s++)this[s][e]==t&&(i=this[s]);return i},Array.prototype.updateObject=function(t,e,i,s){for(var n=0;n<this.length;n++)if(this[n][e]==s)return this[n][i]=s},Array.prototype.findAndRemove=function(t){for(var e=0;e<this.length;e++)this[e]==t&&this.splice(e,1)},Array.prototype.findAndRemoveObject=function(t,e){for(var i=0;i<this.length;i++)this[i]&&this[i][e]==t&&this.splice(i,1)};var info_window=null,last_stop="";